<!DOCTYPE html>
<html>
<head>
    <title>AR.js A-Frame Location-based</title>
    <script src="https://aframe.io/releases/1.3.0/aframe.min.js"></script>
    <script src="https://raw.githack.com/AR-js-org/AR.js/master/three.js/build/ar-threex-location-only.js"></script>
    <script src="https://raw.githack.com/AR-js-org/AR.js/master/aframe/build/aframe-ar.js"></script>
</head>
<body>
    <a-scene vr-mode-ui="enabled: false" arjs="sourceType: webcam; videoTexture: true; debugUIEnabled: false">
        <!-- Load assets -->
        <a-assets>
            <a-asset-item id="gltf-model" src="wizz.gltf"></a-asset-item>
        </a-assets>
        <a-assets>
            <a-asset-item id="pap-model" src="paperplane.glb"></a-asset-item>
        </a-assets>

        <a-camera gps-camera="gpsMinDistance: 1"></a-camera>
        
        <!-- Use GLTF model with customized animation -->
        <a-entity id="airplane" 
                  gltf-model="#gltf-model"
                  gps-entity-place="latitude: 54.350453894781275; longitude: 18.645147261022682"
                  scale="0.08 0.08 0.08"
                  position="10 3 -5"
                  animation="property: position; to: 0 1 8; dur: 10000; easing: linear">
        </a-entity>

        <a-entity id="pap" 
                  gltf-model="#pap-model"
                  gps-entity-place="latitude: 54.350453894781275; longitude: 18.645147261022682"
                  scale="0.1 0.1 0.1"
                  position="10 3 -5"
                  animation="property: position; to: 0 1 8; dur: 10000; easing: linear">
        </a-entity>
    </a-scene>

    <script>
        AFRAME.registerComponent('random-flight', {
            init: function () {
                this.el.addEventListener('animationcomplete', this.setRandomPosition.bind(this));
                this.flightCount = 0;
            },
            setRandomPosition: function () {
                // Increment flight count and reset if necessary
                this.flightCount++;
                if (this.flightCount >= 5) {
                    this.flightCount = 0;
                }
                
                // Randomize starting and ending positions
                const positions = [
                    {start: '12 3 -5', end: '0 1 18'},
                    {start: '8 3 7', end: '0 1 80'},
                    {start: '11 4 -6', end: '0 1 9'},
                    {start: '13 3 8', end: '0 0 20'},
                    {start: '10 2 10', end: '0 1 10'}
                ];
                
                const newPosition = positions[this.flightCount];
                
                // Set new position and animation
                this.el.setAttribute('position', newPosition.start);
                this.el.setAttribute('animation', {
                    property: 'position',
                    to: newPosition.end,
                    dur: 10000,
                    easing: 'linear'
                });
            }
        });
        
        document.querySelector('#airplane').setAttribute('random-flight', '');
    </script>
</body>
</html>
